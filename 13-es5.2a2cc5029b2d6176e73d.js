!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{BCCP:function(t,r,i){"use strict";i.d(r,"a",(function(){return o}));var a=i("wd/R"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"isDate",value:function(){return function(e){var t=e.value;return t?a(t,"DDMMYYYY",!0).isValid()?null:{cpfNotValid:!0}:null}}}]),t}()},FPPW:function(t,r,i){"use strict";i.d(r,"a",(function(){return o}));var a=i("wd/R"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"isReferencia",value:function(){return function(e){var t=e.value;return t?a(t,"MMYYYY",!0).isValid()?null:{referenciaNotValid:!0}:null}}}]),t}()},Q68Q:function(t,r,i){"use strict";i.r(r),i.d(r,"GerarBoletoModule",(function(){return j}));var a=i("3Pt+"),o=i("tR1z"),l=i("aceb"),c=i("vTDv"),d=i("NdjQ"),u=i("tmjD"),m=i("IuZR"),s=i("tyNb"),f=i("ydCe"),v=i("FPPW"),p=i("BCCP"),b=i("fXoL"),h=i("McNs"),g=i("ofXK"),S=function(e,t){return{"is-valid":e,"is-invalid":t}};function E(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"form",2),b["\u0275\u0275listener"]("ngSubmit",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().OnSubmit()})),b["\u0275\u0275elementStart"](1,"nb-card",3),b["\u0275\u0275elementStart"](2,"nb-card-header"),b["\u0275\u0275text"](3," Gerar Boletos Mensais "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"nb-card-body"),b["\u0275\u0275elementStart"](5,"div",4),b["\u0275\u0275elementStart"](6,"div",5),b["\u0275\u0275elementStart"](7,"div",6),b["\u0275\u0275elementStart"](8,"label",7),b["\u0275\u0275text"](9,"* Refer\xeancia:"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](10,"input",8),b["\u0275\u0275elementStart"](11,"div",9),b["\u0275\u0275text"](12," V\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](13,"div",10),b["\u0275\u0275text"](14," Inv\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](15,"div",5),b["\u0275\u0275elementStart"](16,"div",6),b["\u0275\u0275elementStart"](17,"label",7),b["\u0275\u0275text"](18,"* Vencimento:"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](19,"input",11),b["\u0275\u0275elementStart"](20,"div",9),b["\u0275\u0275text"](21," V\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](22,"div",10),b["\u0275\u0275text"](23," Inv\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](24,"div",12),b["\u0275\u0275elementStart"](25,"div",6),b["\u0275\u0275elementStart"](26,"label",7),b["\u0275\u0275text"](27,"A\xe7\xf5es"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](28,"button",13),b["\u0275\u0275text"](29,"Pr\xe9-Visualizar"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("formGroup",r.form),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("nbSpinner",r.loading),b["\u0275\u0275advance"](9),b["\u0275\u0275property"]("mask","00/0000")("status",r.getStatus("referencia"))("ngClass",b["\u0275\u0275pureFunction2"](10,S,r.referencia.valid&&r.submited,r.referencia.invalid&&r.submited))("formControl",r.referencia),b["\u0275\u0275advance"](9),b["\u0275\u0275property"]("mask","00/00/0000")("status",r.getStatus("vencimento"))("ngClass",b["\u0275\u0275pureFunction2"](13,S,r.vencimento.valid&&r.submited,r.vencimento.invalid&&r.submited))("formControl",r.vencimento)}}function y(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275elementStart"](1,"td",21),b["\u0275\u0275text"](2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"td",21),b["\u0275\u0275text"](4),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"td",21),b["\u0275\u0275text"](6),b["\u0275\u0275pipe"](7,"currency"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](8,"td",21),b["\u0275\u0275elementStart"](9,"nb-checkbox",22),b["\u0275\u0275listener"]("ngModelChange",(function(e){return b["\u0275\u0275restoreView"](n),t.$implicit.check=e})),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" ",r.cliente.nome," "),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate4"](" ",r.matricula.logradouro.tipoLogradouro.nome," ",r.matricula.logradouro.nome," ",r.matricula.numero," ",r.matricula.letra," "),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" ",b["\u0275\u0275pipeBind3"](7,7,r.valor,"BRL","symbol")," "),b["\u0275\u0275advance"](3),b["\u0275\u0275property"]("ngModel",r.check)}}function x(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275elementStart"](1,"td",23),b["\u0275\u0275text"](2," Nenhum registro encontrado "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"nb-card",3),b["\u0275\u0275elementStart"](1,"nb-card-body"),b["\u0275\u0275elementStart"](2,"label",7),b["\u0275\u0275text"](3,"Ref\xearencia "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"div",14),b["\u0275\u0275elementStart"](5,"div",4),b["\u0275\u0275elementStart"](6,"table",15),b["\u0275\u0275elementStart"](7,"thead"),b["\u0275\u0275elementStart"](8,"tr"),b["\u0275\u0275elementStart"](9,"th",16),b["\u0275\u0275text"](10," Nome: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](11,"th",16),b["\u0275\u0275text"](12," Matr\xedcula: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](13,"th",16),b["\u0275\u0275text"](14," Valor: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](15,"th",16),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](16,"tbody"),b["\u0275\u0275template"](17,y,10,11,"tr",17),b["\u0275\u0275template"](18,x,3,0,"tr",18),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](19,"nb-card-footer"),b["\u0275\u0275elementStart"](20,"div",4),b["\u0275\u0275elementStart"](21,"div",19),b["\u0275\u0275elementStart"](22,"button",20),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().gerar()})),b["\u0275\u0275text"](23,"Gerar"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("nbSpinner",r.loading),b["\u0275\u0275advance"](17),b["\u0275\u0275property"]("ngForOf",r.contratos),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!(null!=r.contratos&&r.contratos.length))}}var C,k,I,R,P=[{path:"",component:f.a,children:[{path:"adicionar",component:(C=function(){function t(n,r,i){e(this,t),this.authService=n,this.service=r,this.boletoService=i,this.showSelectReferencia=!0,this.loading=!1,this.submited=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loadForm(),this.authService.onTokenChange().subscribe((function(t){t.isValid()&&(e.user=t.getPayload())}))}},{key:"loadForm",value:function(){this.form=new a.h({referencia:new a.e(null,[a.z.required,a.z.minLength(6),a.z.maxLength(6),v.a.isReferencia()]),vencimento:new a.e(null,[a.z.required,a.z.minLength(8),a.z.maxLength(8),p.a.isDate()])})}},{key:"OnSubmit",value:function(){this.submited=!0,this.form.invalid||this.listarContratosPorRefererencia()}},{key:"listarContratosPorRefererencia",value:function(){var e=this;this.contratos=[],this.service.listarPorReferencia(this.referencia.value).subscribe((function(t){t.forEach((function(t){e.contratos.push(t)}))}))}},{key:"gerar",value:function(){var e=this;this.loading=!0;var t=this.referencia.value,n=[],r=[],i={};this.contratos.forEach((function(a){i.contrato=a,i.referencia=t,i.movimentacao=null,i.vencimento=e.vencimento.value,r.push(i),n.push(a)})),this.service.salvarTodos(n).subscribe((function(){e.boletoService.salvarTodos(r).subscribe((function(){e.loading=!1,e.listarContratosPorRefererencia()}),(function(){e.loading=!1}))}),(function(){e.loading=!1}))}},{key:"getStatus",value:function(e){return this.submited?this.form.get(e).valid?"success":"danger":"basic"}},{key:"referencia",get:function(){return this.form.get("referencia")}},{key:"vencimento",get:function(){return this.form.get("vencimento")}}]),t}(),C.\u0275fac=function(e){return new(e||C)(b["\u0275\u0275directiveInject"](h.d),b["\u0275\u0275directiveInject"](d.a),b["\u0275\u0275directiveInject"](m.a))},C.\u0275cmp=b["\u0275\u0275defineComponent"]({type:C,selectors:[["ngx-gerar-boleto-adicionar"]],decls:2,vars:2,consts:[["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["accent","success",3,"nbSpinner",4,"ngIf"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["accent","success",3,"nbSpinner"],[1,"row"],[1,"col-md-3","col-12"],[1,"form-group"],[1,"label"],["nbInput","","fullWidth","","type","text","placeholder","Refer\xeancia",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"valid-feedback"],[1,"invalid-feedback"],["nbInput","","fullWidth","","type","text","placeholder","vencimento",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"col-md-3","offset-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","success","type","submit"],[1,"col-12"],[1,"table","table-sm","table-striped"],["scope","col",1,"align-middle","font-weight-bold"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"offset-md-9","col-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","basic",3,"click"],[1,"align-middle"],[1,"align-center",3,"ngModel","ngModelChange"],["colspan","3",1,"align-middle"]],template:function(e,t){1&e&&(b["\u0275\u0275template"](0,E,30,16,"form",0),b["\u0275\u0275template"](1,w,24,3,"nb-card",1)),2&e&&(b["\u0275\u0275property"]("ngIf",t.showSelectReferencia),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!t.showSelectReferencia))},directives:[g.n,a.B,a.r,a.i,l.v,l.qb,l.x,l.u,l.O,u.a,a.b,g.l,a.q,a.f,l.s,g.m,l.w,l.z,a.t],pipes:[g.d],encapsulation:2}),C)}]}],V=((R=function t(){e(this,t)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||R)},imports:[[s.g.forChild(P)],s.g]}),R),M=((I=function t(){e(this,t)}).\u0275fac=function(e){return new(e||I)},I.\u0275prov=b["\u0275\u0275defineInjectable"]({token:I,factory:I.\u0275fac}),I),j=((k=function t(){e(this,t)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},providers:[M,d.a,m.a],imports:[[c.a,l.y,l.t,l.P,l.mb,o.a,l.M,a.k,a.w,l.P,l.rb,V,l.A,l.Kb,u.c.forChild(),l.F.forRoot()]]}),k)}}])}();