!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BCCP:function(t,r,a){"use strict";a.d(r,"a",(function(){return o}));var i=a("wd/R"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"isDate",value:function(){return function(e){var t=e.value;return t?i(t,"DDMMYYYY",!0).isValid()?null:{cpfNotValid:!0}:null}}}]),t}()},Q68Q:function(t,r,a){"use strict";a.r(r),a.d(r,"GerarBoletoModule",(function(){return V}));var i=a("3Pt+"),o=a("tR1z"),l=a("aceb"),c=a("vTDv"),d=a("NdjQ"),m=a("tmjD"),u=a("IuZR"),s=a("tyNb"),f=a("ydCe"),v=a("FPPW"),p=a("BCCP"),b=a("fXoL"),h=a("McNs"),g=a("ofXK");function S(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275elementStart"](1,"td",20),b["\u0275\u0275text"](2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"td",20),b["\u0275\u0275text"](4),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"td",20),b["\u0275\u0275text"](6),b["\u0275\u0275pipe"](7,"currency"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](8,"td",20),b["\u0275\u0275elementStart"](9,"nb-checkbox",21),b["\u0275\u0275listener"]("ngModelChange",(function(e){return b["\u0275\u0275restoreView"](n),t.$implicit.check=e})),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" ",r.cliente.nome," "),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate4"](" ",r.matricula.logradouro.tipoLogradouro.nome," ",r.matricula.logradouro.nome," ",r.matricula.numero," ",r.matricula.letra," "),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" ",b["\u0275\u0275pipeBind3"](7,7,r.valor,"BRL","symbol")," "),b["\u0275\u0275advance"](3),b["\u0275\u0275property"]("ngModel",r.check)}}function E(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"tr"),b["\u0275\u0275elementStart"](1,"td",22),b["\u0275\u0275text"](2," Nenhum registro encontrado "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"nb-card",1),b["\u0275\u0275elementStart"](1,"nb-card-body"),b["\u0275\u0275elementStart"](2,"label",5),b["\u0275\u0275text"](3,"Ref\xearencia "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"div",13),b["\u0275\u0275elementStart"](5,"div",2),b["\u0275\u0275elementStart"](6,"table",14),b["\u0275\u0275elementStart"](7,"thead"),b["\u0275\u0275elementStart"](8,"tr"),b["\u0275\u0275elementStart"](9,"th",15),b["\u0275\u0275text"](10," Nome: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](11,"th",15),b["\u0275\u0275text"](12," Matr\xedcula: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](13,"th",15),b["\u0275\u0275text"](14," Valor: "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](15,"th",15),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](16,"tbody"),b["\u0275\u0275template"](17,S,10,11,"tr",16),b["\u0275\u0275template"](18,E,3,0,"tr",17),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](19,"nb-card-footer"),b["\u0275\u0275elementStart"](20,"div",2),b["\u0275\u0275elementStart"](21,"div",18),b["\u0275\u0275elementStart"](22,"button",19),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().gerar()})),b["\u0275\u0275text"](23,"Gerar"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"]();b["\u0275\u0275property"]("nbSpinner",r.loading),b["\u0275\u0275advance"](17),b["\u0275\u0275property"]("ngForOf",r.contratos),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!(null!=r.contratos&&r.contratos.length))}}var x,k,C,w,I=function(e,t){return{"is-valid":e,"is-invalid":t}},P=[{path:"",component:f.a,children:[{path:"adicionar",component:(x=function(){function t(n,r,a){e(this,t),this.authService=n,this.service=r,this.boletoService=a,this.loading=!1,this.submited=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loadForm(),this.authService.onTokenChange().subscribe((function(t){t.isValid()&&(e.user=t.getPayload())}))}},{key:"loadForm",value:function(){this.form=new i.h({referencia:new i.e(null,[i.z.required,i.z.minLength(6),i.z.maxLength(6),v.a.isReferencia()]),vencimento:new i.e(null,[i.z.required,i.z.minLength(8),i.z.maxLength(8),p.a.isDate()])})}},{key:"OnSubmit",value:function(){this.submited=!0,this.form.invalid||this.listarContratosPorRefererencia()}},{key:"listarContratosPorRefererencia",value:function(){var e=this;this.contratos=[],this.service.listarPorReferencia(this.referencia.value).subscribe((function(t){t.forEach((function(t){t.check=!0,e.contratos.push(t)}))}))}},{key:"gerar",value:function(){var e=this;this.loading=!0;var t=this.referencia.value,n=[],r=[],a={};this.contratos.forEach((function(i){i.check&&(i.referencias||(i.referencias=[]),i.referencias.push(t)),a.contrato=i,a.referencia=t,a.movimentacao=null,a.vencimento=e.vencimento.value,r.push(a),n.push(i)})),this.service.salvarTodos(n).subscribe((function(){e.boletoService.salvarTodos(r).subscribe((function(){e.loading=!1,e.listarContratosPorRefererencia()}),(function(){e.loading=!1}))}),(function(){e.loading=!1}))}},{key:"getStatus",value:function(e){return this.submited?this.form.get(e).valid?"success":"danger":"basic"}},{key:"referencia",get:function(){return this.form.get("referencia")}},{key:"vencimento",get:function(){return this.form.get("vencimento")}}]),t}(),x.\u0275fac=function(e){return new(e||x)(b["\u0275\u0275directiveInject"](h.d),b["\u0275\u0275directiveInject"](d.a),b["\u0275\u0275directiveInject"](u.a))},x.\u0275cmp=b["\u0275\u0275defineComponent"]({type:x,selectors:[["ngx-gerar-boleto-adicionar"]],decls:31,vars:17,consts:[["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["accent","success",3,"nbSpinner"],[1,"row"],[1,"col-md-3","col-12"],[1,"form-group"],[1,"label"],["nbInput","","fullWidth","","type","text","placeholder","Refer\xeancia",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"valid-feedback"],[1,"invalid-feedback"],["nbInput","","fullWidth","","type","text","placeholder","vencimento",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"col-md-3","offset-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","success","type","submit"],["accent","success",3,"nbSpinner",4,"ngIf"],[1,"col-12"],[1,"table","table-sm","table-striped"],["scope","col",1,"align-middle","font-weight-bold"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"offset-md-9","col-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","basic",3,"click"],[1,"align-middle"],[1,"align-center",3,"ngModel","ngModelChange"],["colspan","3",1,"align-middle"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"form",0),b["\u0275\u0275listener"]("ngSubmit",(function(){return t.OnSubmit()})),b["\u0275\u0275elementStart"](1,"nb-card",1),b["\u0275\u0275elementStart"](2,"nb-card-header"),b["\u0275\u0275text"](3," Gerar Boletos Mensais "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"nb-card-body"),b["\u0275\u0275elementStart"](5,"div",2),b["\u0275\u0275elementStart"](6,"div",3),b["\u0275\u0275elementStart"](7,"div",4),b["\u0275\u0275elementStart"](8,"label",5),b["\u0275\u0275text"](9,"* Refer\xeancia:"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](10,"input",6),b["\u0275\u0275elementStart"](11,"div",7),b["\u0275\u0275text"](12," V\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](13,"div",8),b["\u0275\u0275text"](14," Inv\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](15,"div",3),b["\u0275\u0275elementStart"](16,"div",4),b["\u0275\u0275elementStart"](17,"label",5),b["\u0275\u0275text"](18,"* Vencimento:"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](19,"input",9),b["\u0275\u0275elementStart"](20,"div",7),b["\u0275\u0275text"](21," V\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](22,"div",8),b["\u0275\u0275text"](23," Inv\xe1lido "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](24,"div",10),b["\u0275\u0275elementStart"](25,"div",4),b["\u0275\u0275elementStart"](26,"label",5),b["\u0275\u0275text"](27,"A\xe7\xf5es"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](28,"button",11),b["\u0275\u0275text"](29,"Pr\xe9-Visualizar"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](30,y,24,3,"nb-card",12)),2&e&&(b["\u0275\u0275property"]("formGroup",t.form),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("nbSpinner",t.loading),b["\u0275\u0275advance"](9),b["\u0275\u0275property"]("mask","00/0000")("status",t.getStatus("referencia"))("ngClass",b["\u0275\u0275pureFunction2"](11,I,t.referencia.valid&&t.submited,t.referencia.invalid&&t.submited))("formControl",t.referencia),b["\u0275\u0275advance"](9),b["\u0275\u0275property"]("mask","00/00/0000")("status",t.getStatus("vencimento"))("ngClass",b["\u0275\u0275pureFunction2"](14,I,t.vencimento.valid&&t.submited,t.vencimento.invalid&&t.submited))("formControl",t.vencimento),b["\u0275\u0275advance"](11),b["\u0275\u0275property"]("ngIf",t.contratos))},directives:[i.B,i.r,i.i,l.v,l.pb,l.x,l.u,l.P,m.a,i.b,g.l,i.q,i.f,l.s,g.n,g.m,l.w,l.A,i.t],pipes:[g.d],encapsulation:2}),x)}]}],R=((w=function t(){e(this,t)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[s.g.forChild(P)],s.g]}),w),M=((C=function t(){e(this,t)}).\u0275fac=function(e){return new(e||C)},C.\u0275prov=b["\u0275\u0275defineInjectable"]({token:C,factory:C.\u0275fac}),C),V=((k=function t(){e(this,t)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},providers:[M,d.a,u.a],imports:[[c.a,l.y,l.t,l.Q,l.lb,o.a,l.N,i.k,i.w,l.Q,l.qb,R,l.B,l.Jb,m.c.forChild(),l.G.forRoot()]]}),k)}}])}();