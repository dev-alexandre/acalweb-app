(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{BCCP:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wd/R");class a{constructor(){}static isDate(){return e=>{const t=e.value;return t?r(t,"DDMMYYYY",!0).isValid()?null:{cpfNotValid:!0}:null}}}},FPPW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("wd/R");class a{constructor(){}static isReferencia(){return e=>{const t=e.value;return t?r(t,"MMYYYY",!0).isValid()?null:{referenciaNotValid:!0}:null}}}},Q68Q:function(e,t,n){"use strict";n.r(t),n.d(t,"GerarBoletoModule",(function(){return I}));var r=n("3Pt+"),a=n("tR1z"),i=n("aceb"),o=n("vTDv"),l=n("NdjQ"),c=n("tmjD"),s=n("IuZR"),d=n("tyNb"),m=n("ydCe"),u=n("FPPW"),f=n("BCCP"),p=n("fXoL"),v=n("McNs"),h=n("ofXK");const b=function(e,t){return{"is-valid":e,"is-invalid":t}};function g(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"form",2),p["\u0275\u0275listener"]("ngSubmit",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().OnSubmit()})),p["\u0275\u0275elementStart"](1,"nb-card",3),p["\u0275\u0275elementStart"](2,"nb-card-header"),p["\u0275\u0275text"](3," Gerar Boletos Mensais "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"nb-card-body"),p["\u0275\u0275elementStart"](5,"div",4),p["\u0275\u0275elementStart"](6,"div",5),p["\u0275\u0275elementStart"](7,"div",6),p["\u0275\u0275elementStart"](8,"label",7),p["\u0275\u0275text"](9,"* Refer\xeancia:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](10,"input",8),p["\u0275\u0275elementStart"](11,"div",9),p["\u0275\u0275text"](12," V\xe1lido "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"div",10),p["\u0275\u0275text"](14," Inv\xe1lido "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"div",5),p["\u0275\u0275elementStart"](16,"div",6),p["\u0275\u0275elementStart"](17,"label",7),p["\u0275\u0275text"](18,"* Vencimento:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](19,"input",11),p["\u0275\u0275elementStart"](20,"div",9),p["\u0275\u0275text"](21," V\xe1lido "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](22,"div",10),p["\u0275\u0275text"](23," Inv\xe1lido "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"div",12),p["\u0275\u0275elementStart"](25,"div",6),p["\u0275\u0275elementStart"](26,"label",7),p["\u0275\u0275text"](27,"A\xe7\xf5es"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](28,"button",13),p["\u0275\u0275text"](29,"Pr\xe9-Visualizar"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("formGroup",e.form),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("nbSpinner",e.loading),p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("mask","00/0000")("status",e.getStatus("referencia"))("ngClass",p["\u0275\u0275pureFunction2"](10,b,e.referencia.valid&&e.submited,e.referencia.invalid&&e.submited))("formControl",e.referencia),p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("mask","00/00/0000")("status",e.getStatus("vencimento"))("ngClass",p["\u0275\u0275pureFunction2"](13,b,e.vencimento.valid&&e.submited,e.vencimento.invalid&&e.submited))("formControl",e.vencimento)}}function S(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"tr"),p["\u0275\u0275elementStart"](1,"td",21),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"td",21),p["\u0275\u0275text"](4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"td",21),p["\u0275\u0275text"](6),p["\u0275\u0275pipe"](7,"currency"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"td",21),p["\u0275\u0275elementStart"](9,"nb-checkbox",22),p["\u0275\u0275listener"]("ngModelChange",(function(n){return p["\u0275\u0275restoreView"](e),t.$implicit.check=n})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",e.cliente.nome," "),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate4"](" ",e.matricula.logradouro.tipoLogradouro.nome," ",e.matricula.logradouro.nome," ",e.matricula.numero," ",e.matricula.letra," "),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind3"](7,7,e.valor,"BRL","symbol")," "),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngModel",e.check)}}function E(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"tr"),p["\u0275\u0275elementStart"](1,"td",23),p["\u0275\u0275text"](2," Nenhum registro encontrado "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"nb-card",3),p["\u0275\u0275elementStart"](1,"nb-card-body"),p["\u0275\u0275elementStart"](2,"label",7),p["\u0275\u0275text"](3,"Ref\xearencia "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"div",14),p["\u0275\u0275elementStart"](5,"div",4),p["\u0275\u0275elementStart"](6,"table",15),p["\u0275\u0275elementStart"](7,"thead"),p["\u0275\u0275elementStart"](8,"tr"),p["\u0275\u0275elementStart"](9,"th",16),p["\u0275\u0275text"](10," Nome: "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"th",16),p["\u0275\u0275text"](12," Matr\xedcula: "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"th",16),p["\u0275\u0275text"](14," Valor: "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](15,"th",16),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"tbody"),p["\u0275\u0275template"](17,S,10,11,"tr",17),p["\u0275\u0275template"](18,E,3,0,"tr",18),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](19,"nb-card-footer"),p["\u0275\u0275elementStart"](20,"div",4),p["\u0275\u0275elementStart"](21,"div",19),p["\u0275\u0275elementStart"](22,"button",20),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().gerar()})),p["\u0275\u0275text"](23,"Gerar"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("nbSpinner",e.loading),p["\u0275\u0275advance"](17),p["\u0275\u0275property"]("ngForOf",e.contratos),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!(null!=e.contratos&&e.contratos.length))}}const C=[{path:"",component:m.a,children:[{path:"adicionar",component:(()=>{class e{constructor(e,t,n){this.authService=e,this.service=t,this.boletoService=n,this.showSelectReferencia=!0,this.loading=!1,this.submited=!1}ngOnInit(){this.loadForm(),this.authService.onTokenChange().subscribe(e=>{e.isValid()&&(this.user=e.getPayload())})}loadForm(){this.form=new r.h({referencia:new r.e(null,[r.z.required,r.z.minLength(6),r.z.maxLength(6),u.a.isReferencia()]),vencimento:new r.e(null,[r.z.required,r.z.minLength(8),r.z.maxLength(8),f.a.isDate()])})}OnSubmit(){this.submited=!0,this.form.invalid||this.listarContratosPorRefererencia()}listarContratosPorRefererencia(){this.contratos=[],this.service.listarPorReferencia(this.referencia.value).subscribe(e=>{e.forEach(e=>{this.contratos.push(e)})})}gerar(){this.loading=!0;const e=this.referencia.value,t=[],n=[],r={};this.contratos.forEach(a=>{r.contrato=a,r.referencia=e,r.movimentacao=null,r.vencimento=this.vencimento.value,n.push(r),t.push(a)}),this.service.salvarTodos(t).subscribe(()=>{this.boletoService.salvarTodos(n).subscribe(()=>{this.loading=!1,this.listarContratosPorRefererencia()},()=>{this.loading=!1})},()=>{this.loading=!1})}getStatus(e){return this.submited?this.form.get(e).valid?"success":"danger":"basic"}get referencia(){return this.form.get("referencia")}get vencimento(){return this.form.get("vencimento")}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](v.d),p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-gerar-boleto-adicionar"]],decls:2,vars:2,consts:[["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["accent","success",3,"nbSpinner",4,"ngIf"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["accent","success",3,"nbSpinner"],[1,"row"],[1,"col-md-3","col-12"],[1,"form-group"],[1,"label"],["nbInput","","fullWidth","","type","text","placeholder","Refer\xeancia",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"valid-feedback"],[1,"invalid-feedback"],["nbInput","","fullWidth","","type","text","placeholder","vencimento",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"col-md-3","offset-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","success","type","submit"],[1,"col-12"],[1,"table","table-sm","table-striped"],["scope","col",1,"align-middle","font-weight-bold"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"offset-md-9","col-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","basic",3,"click"],[1,"align-middle"],[1,"align-center",3,"ngModel","ngModelChange"],["colspan","3",1,"align-middle"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,g,30,16,"form",0),p["\u0275\u0275template"](1,x,24,3,"nb-card",1)),2&e&&(p["\u0275\u0275property"]("ngIf",t.showSelectReferencia),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.showSelectReferencia))},directives:[h.n,r.B,r.r,r.i,i.v,i.qb,i.x,i.u,i.O,c.a,r.b,h.l,r.q,r.f,i.s,h.m,i.w,i.z,r.t],pipes:[h.d],encapsulation:2}),e})()}]}];let w=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[d.g.forChild(C)],d.g]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),I=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[y,l.a,s.a],imports:[[o.a,i.y,i.t,i.P,i.mb,a.a,i.M,r.k,r.w,i.P,i.rb,w,i.A,i.Kb,c.c.forChild(),i.F.forRoot()]]}),e})()}}]);