!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{BCCP:function(t,r,i){"use strict";i.d(r,"a",(function(){return o}));var a=i("wd/R"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"isDate",value:function(){return function(e){var t=e.value;return t?a(t,"DDMMYYYY",!0).isValid()?null:{cpfNotValid:!0}:null}}}]),t}()},FPPW:function(t,r,i){"use strict";i.d(r,"a",(function(){return o}));var a=i("wd/R"),o=function(){function t(){e(this,t)}return n(t,null,[{key:"isReferencia",value:function(){return function(e){var t=e.value;return t?a(t,"MMYYYY",!0).isValid()?null:{referenciaNotValid:!0}:null}}}]),t}()},Q68Q:function(t,r,i){"use strict";i.r(r),i.d(r,"GerarBoletoModule",(function(){return j}));var a=i("3Pt+"),o=i("tR1z"),l=i("aceb"),c=i("vTDv"),d=i("NdjQ"),u=i("tmjD"),m=i("IuZR"),s=i("tyNb"),f=i("ydCe"),v=i("FPPW"),p=i("BCCP"),h=i("fXoL"),b=i("McNs"),g=i("ofXK"),S=function(e,t){return{"is-valid":e,"is-invalid":t}};function E(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"form",2),h["\u0275\u0275listener"]("ngSubmit",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().OnSubmit()})),h["\u0275\u0275elementStart"](1,"nb-card",3),h["\u0275\u0275elementStart"](2,"nb-card-header"),h["\u0275\u0275text"](3," Gerar Boletos Mensais "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"nb-card-body"),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"div",5),h["\u0275\u0275elementStart"](7,"div",6),h["\u0275\u0275elementStart"](8,"label",7),h["\u0275\u0275text"](9,"* Refer\xeancia:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](10,"input",8),h["\u0275\u0275elementStart"](11,"div",9),h["\u0275\u0275text"](12," V\xe1lido "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"div",10),h["\u0275\u0275text"](14," Inv\xe1lido "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](15,"div",5),h["\u0275\u0275elementStart"](16,"div",6),h["\u0275\u0275elementStart"](17,"label",7),h["\u0275\u0275text"](18,"* Vencimento:"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](19,"input",11),h["\u0275\u0275elementStart"](20,"div",9),h["\u0275\u0275text"](21," V\xe1lido "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](22,"div",10),h["\u0275\u0275text"](23," Inv\xe1lido "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](24,"div",12),h["\u0275\u0275elementStart"](25,"div",6),h["\u0275\u0275elementStart"](26,"label",7),h["\u0275\u0275text"](27,"A\xe7\xf5es"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"button",13),h["\u0275\u0275text"](29,"Pr\xe9-Visualizar"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("formGroup",r.form),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("nbSpinner",r.loading),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("mask","00/0000")("status",r.getStatus("referencia"))("ngClass",h["\u0275\u0275pureFunction2"](10,S,r.referencia.valid&&r.submited,r.referencia.invalid&&r.submited))("formControl",r.referencia),h["\u0275\u0275advance"](9),h["\u0275\u0275property"]("mask","00/00/0000")("status",r.getStatus("vencimento"))("ngClass",h["\u0275\u0275pureFunction2"](13,S,r.vencimento.valid&&r.submited,r.vencimento.invalid&&r.submited))("formControl",r.vencimento)}}function y(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td",21),h["\u0275\u0275text"](2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"td",21),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"td",21),h["\u0275\u0275text"](6),h["\u0275\u0275pipe"](7,"currency"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"td",21),h["\u0275\u0275elementStart"](9,"nb-checkbox",22),h["\u0275\u0275listener"]("ngModelChange",(function(e){return h["\u0275\u0275restoreView"](n),t.$implicit.check=e})),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",r.cliente.nome," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate4"](" ",r.matricula.logradouro.tipoLogradouro.nome," ",r.matricula.logradouro.nome," ",r.matricula.numero," ",r.matricula.letra," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",h["\u0275\u0275pipeBind3"](7,7,r.valor,"BRL","symbol")," "),h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("ngModel",r.check)}}function x(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"tr"),h["\u0275\u0275elementStart"](1,"td",23),h["\u0275\u0275text"](2," Nenhum registro encontrado "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"nb-card",3),h["\u0275\u0275elementStart"](1,"nb-card-body"),h["\u0275\u0275elementStart"](2,"label",7),h["\u0275\u0275text"](3,"Ref\xearencia "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"div",14),h["\u0275\u0275elementStart"](5,"div",4),h["\u0275\u0275elementStart"](6,"table",15),h["\u0275\u0275elementStart"](7,"thead"),h["\u0275\u0275elementStart"](8,"tr"),h["\u0275\u0275elementStart"](9,"th",16),h["\u0275\u0275text"](10," Nome: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](11,"th",16),h["\u0275\u0275text"](12," Matr\xedcula: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](13,"th",16),h["\u0275\u0275text"](14," Valor: "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](15,"th",16),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](16,"tbody"),h["\u0275\u0275template"](17,y,10,11,"tr",17),h["\u0275\u0275template"](18,x,3,0,"tr",18),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](19,"nb-card-footer"),h["\u0275\u0275elementStart"](20,"div",4),h["\u0275\u0275elementStart"](21,"div",19),h["\u0275\u0275elementStart"](22,"button",20),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().gerar()})),h["\u0275\u0275text"](23,"Gerar"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var r=h["\u0275\u0275nextContext"]();h["\u0275\u0275property"]("nbSpinner",r.loading),h["\u0275\u0275advance"](17),h["\u0275\u0275property"]("ngForOf",r.contratos),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!(null!=r.contratos&&r.contratos.length))}}var C,k,I,R,V=[{path:"",component:f.a,children:[{path:"adicionar",component:(C=function(){function t(n,r,i){e(this,t),this.authService=n,this.service=r,this.boletoService=i,this.showSelectReferencia=!0,this.loading=!1,this.submited=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.loadForm(),this.authService.onTokenChange().subscribe((function(t){t.isValid()&&(e.user=t.getPayload())}))}},{key:"loadForm",value:function(){this.form=new a.h({referencia:new a.e(null,[a.z.required,a.z.minLength(6),a.z.maxLength(6),v.a.isReferencia()]),vencimento:new a.e(null,[a.z.required,a.z.minLength(8),a.z.maxLength(8),p.a.isDate()])})}},{key:"OnSubmit",value:function(){this.submited=!0,this.form.invalid||this.listarContratosPorRefererencia()}},{key:"listarContratosPorRefererencia",value:function(){var e=this;this.contratos=[],this.service.listarPorReferencia(this.referencia.value).subscribe((function(t){t.forEach((function(t){t.check=!0,e.contratos.push(t)}))}))}},{key:"gerar",value:function(){var e=this;this.loading=!0;var t=this.referencia.value,n=[],r=[],i={};this.contratos.forEach((function(a){a.check&&(a.referencias||(a.referencias=[]),a.referencias.push(t)),i.contrato=a,i.referencia=t,i.movimentacao=null,i.vencimento=e.vencimento.value,r.push(i),n.push(a)})),this.service.salvarTodos(n).subscribe((function(){e.boletoService.salvarTodos(r).subscribe((function(){e.loading=!1,e.listarContratosPorRefererencia()}),(function(){e.loading=!1}))}),(function(){e.loading=!1}))}},{key:"getStatus",value:function(e){return this.submited?this.form.get(e).valid?"success":"danger":"basic"}},{key:"referencia",get:function(){return this.form.get("referencia")}},{key:"vencimento",get:function(){return this.form.get("vencimento")}}]),t}(),C.\u0275fac=function(e){return new(e||C)(h["\u0275\u0275directiveInject"](b.d),h["\u0275\u0275directiveInject"](d.a),h["\u0275\u0275directiveInject"](m.a))},C.\u0275cmp=h["\u0275\u0275defineComponent"]({type:C,selectors:[["ngx-gerar-boleto-adicionar"]],decls:2,vars:2,consts:[["class","needs-validation","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["accent","success",3,"nbSpinner",4,"ngIf"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],["accent","success",3,"nbSpinner"],[1,"row"],[1,"col-md-3","col-12"],[1,"form-group"],[1,"label"],["nbInput","","fullWidth","","type","text","placeholder","Refer\xeancia",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"valid-feedback"],[1,"invalid-feedback"],["nbInput","","fullWidth","","type","text","placeholder","vencimento",1,"form-control",3,"mask","status","ngClass","formControl"],[1,"col-md-3","offset-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","success","type","submit"],[1,"col-12"],[1,"table","table-sm","table-striped"],["scope","col",1,"align-middle","font-weight-bold"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"offset-md-9","col-md-3","col-12"],["nbButton","","outline","","fullWidth","","status","basic",3,"click"],[1,"align-middle"],[1,"align-center",3,"ngModel","ngModelChange"],["colspan","3",1,"align-middle"]],template:function(e,t){1&e&&(h["\u0275\u0275template"](0,E,30,16,"form",0),h["\u0275\u0275template"](1,w,24,3,"nb-card",1)),2&e&&(h["\u0275\u0275property"]("ngIf",t.showSelectReferencia),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",!t.showSelectReferencia))},directives:[g.n,a.B,a.r,a.i,l.v,l.rb,l.x,l.u,l.P,u.a,a.b,g.l,a.q,a.f,l.s,g.m,l.w,l.A,a.t],pipes:[g.d],encapsulation:2}),C)}]}],P=((R=function t(){e(this,t)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||R)},imports:[[s.g.forChild(V)],s.g]}),R),M=((I=function t(){e(this,t)}).\u0275fac=function(e){return new(e||I)},I.\u0275prov=h["\u0275\u0275defineInjectable"]({token:I,factory:I.\u0275fac}),I),j=((k=function t(){e(this,t)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},providers:[M,d.a,m.a],imports:[[c.a,l.y,l.t,l.Q,l.nb,o.a,l.N,a.k,a.w,l.Q,l.sb,P,l.B,l.Lb,u.c.forChild(),l.G.forRoot()]]}),k)}}])}();